#!/data/data/com.termux/files/usr/bin/bash

# IP Address ржкрж░рж┐ржмрж░рзНрждржирзЗрж░ рж╕рзНржХрзНрж░рж┐ржкрзНржЯ (ржкрзНрж░рждрж┐ 2 рж╕рзЗржХрзЗржирзНржбрзЗ)
# рж╢рзБржзрзБржорж╛рждрзНрж░ Educational Purpose-ржП ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи

# ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝ ржкрзНржпрж╛ржХрзЗржЬ ржЗржирзНрж╕ржЯрж▓
pkg install -y tsu
pkg install -y busybox

# ржЪрзЗржХ ржХрж░рзБржи ржЖржкржирж┐ root access ржкрж╛ржЪрзНржЫрзЗржи ржХрж┐ржирж╛
if ! command -v tsu >/dev/null; then
  echo "ЁЯФ┤ tsu (root shell) ржЗржирж╕рзНржЯрж▓ рж╣рзЯржирж┐ ржмрж╛ root access ржирзЗржЗ!" >&2
  exit 1
fi

# ржирзЗржЯржУрзЯрж╛рж░рзНржХ ржЗржирзНржЯрж╛рж░ржлрзЗрж╕ ржирж╛ржо ржмрзЗрж░ ржХрж░рж╛ (ржпрзЗржоржи: wlan0)
IFACE=$(ip route | awk '/default/ {print $5}')

# ржЪрзЗржХ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ ржЗржирзНржЯрж╛рж░ржлрзЗрж╕ рж╕ржарж┐ржХ ржЖржЫрзЗ ржХрж┐ржирж╛
if [ -z "$IFACE" ]; then
  echo "ЁЯФ┤ Network interface ржЦрзБржБржЬрзЗ ржкрж╛ржУрзЯрж╛ ржпрж╛рзЯржирж┐!" >&2
  exit 1
fi

# IP ржкрж░рж┐ржмрж░рзНрждржирзЗрж░ рж▓рзБржк
while true; do
  # рж░тАНрзНржпрж╛ржирзНржбржо 1 ржерзЗржХрзЗ 254 ржкрж░рзНржпржирзНржд рж╢рзЗрж╖ ржЕрж╖рзНржЯржХ рждрзИрж░рж┐
  LAST_OCTET=$((RANDOM % 254 + 1))
  NEW_IP="192.168.43.$LAST_OCTET"

  echo "ЁЯЯв ржирждрзБржи IP рж╕рзЗржЯ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ: $NEW_IP"
  tsu -c "ifconfig $IFACE $NEW_IP netmask 255.255.255.0"

  sleep 2
done
